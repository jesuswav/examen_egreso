<ion-header>
  <ion-toolbar>
    <ion-title>Banco de Preguntas</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-grid>
    <ion-row>
      <ion-col size="6">
        <ion-card>
          <ion-card-header>
            <ion-card-title>Agregar Pregunta</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <form (ngSubmit)="addPregunta()">
              <ion-item>
                <ion-label position="floating">Pregunta</ion-label>
                <ion-input [(ngModel)]="pregunta.pregunta" name="pregunta" required></ion-input>
              </ion-item>
              <ion-item>
                <ion-label position="floating">Respuesta A</ion-label>
                <ion-input [(ngModel)]="pregunta.respuesta1" name="respuesta1" required></ion-input>
              </ion-item>
              <ion-item>
                <ion-label position="floating">Respuesta B</ion-label>
                <ion-input [(ngModel)]="pregunta.respuesta2" name="respuesta2" required></ion-input>
              </ion-item>
              <ion-item>
                <ion-label position="floating">Respuesta C</ion-label>
                <ion-input [(ngModel)]="pregunta.respuesta3" name="respuesta3" required></ion-input>
              </ion-item>
              <ion-item>
                <ion-label position="floating">Respuesta D</ion-label>
                <ion-input [(ngModel)]="pregunta.respuesta4" name="respuesta4" required></ion-input>
              </ion-item>
              <ion-item>
                <ion-label position="floating">Respuesta Correcta</ion-label>
                <ion-select [(ngModel)]="pregunta.respuesta_correcta" name="respuesta_correcta" required>
                  <ion-select-option value="1">Respuesta A</ion-select-option>
                  <ion-select-option value="2">Respuesta B</ion-select-option>
                  <ion-select-option value="3">Respuesta C</ion-select-option>
                  <ion-select-option value="4">Respuesta D</ion-select-option>
                </ion-select>
              </ion-item>
              <ion-item>
                <ion-label position="floating">Módulo</ion-label>
                <ion-select [(ngModel)]="pregunta.id_modulo" name="id_modulo" required>
                  <ion-select-option *ngFor="let modulo of modulos" [value]="modulo.id">{{ modulo.nombre }}</ion-select-option>
                </ion-select>
              </ion-item>
              <ion-button expand="full" type="submit">Agregar Pregunta</ion-button>
            </form>
          </ion-card-content>
        </ion-card>
      </ion-col>

      <ion-col size="6">
        <ion-card>
          <ion-card-header>
            <ion-card-title>Preguntas por Módulo</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <ion-item>
              <ion-label>Módulo</ion-label>
              <ion-select [(ngModel)]="selectedModulo" (ionChange)="loadPreguntas()">
                <ion-select-option *ngFor="let modulo of modulos" [value]="modulo.id">{{ modulo.modulo }}</ion-select-option>
              </ion-select>
            </ion-item>
            <ion-item>
              <ion-label>Total de Preguntas</ion-label>
              <ion-badge slot="end">{{ preguntas.length }}</ion-badge>
            </ion-item>
            <ion-list>
              <ion-item *ngFor="let pregunta of preguntas">
                <ion-label>
                  <h2>{{ pregunta.pregunta }}</h2>
                  <p>Respuestas:</p>
                  <ul>
                    <li>A. {{ pregunta.respuesta1 }}</li>
                    <li>B. {{ pregunta.respuesta2 }}</li>
                    <li>C. {{ pregunta.respuesta3 }}</li>
                    <li>D. {{ pregunta.respuesta4 }}</li>
                  </ul>
                  <p>Respuesta Correcta: {{ getRespuestaCorrecta(pregunta) }}</p>
                  <ion-button (click)="editPregunta(pregunta)">Editar</ion-button>
                  <ion-button color="danger" (click)="deletePregunta(pregunta.id)">Eliminar</ion-button>
                </ion-label>
              </ion-item>
            </ion-list>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
